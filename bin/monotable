#!/usr/bin/env ruby

require File.expand_path(File.join(File.dirname(__FILE__),'..','lib','monotable','monotable.rb'))
require 'rubygems'
require 'eventmachine'
require 'evma_httpserver'

LOCAL_STORE_PATH = File.expand_path(File.join(File.dirname(__FILE__),'..','data'))
Dir.mkdir(LOCAL_STORE_PATH) unless File.exists?(LOCAL_STORE_PATH)

LOCAL_STORE = Monotable::SoloDaemon.new(:store_paths=>[LOCAL_STORE_PATH])

EM.run{
  EM.start_server '0.0.0.0', 8080,  Monotable::Daemon
}